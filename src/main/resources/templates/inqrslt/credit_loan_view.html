<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>뱅크핀</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no, viewport-fit=cover">
	<link rel="stylesheet" type="text/css" href="/user/static/assets/css/common.css" />
</head>

<body>

	<!-- wrap -->
	<div id="wrap">

		<!-- header -->
		<header id="header">
			<div class="header_sub">
				<div class="inner">
					<button class="backBtn" onclick="previous()"><span class="blind">뒤로가기</span></button>
					<h2 class="ttl">상품정보</h2>
				</div>
			</div>
			<!-- //header_sub e -->
		</header>
		<!-- //header e -->

		<!-- container -->
		<div id="container">

			<!-- content -->
			<div class="content" id="loan">
				<script id="loan_template" type="text/x-handlebars-template">
				<div class="lon_box_list view">

					<dl>
						<!--info box-->
						<div>
							<dt class="bank_info">
								<img src="{{bankImage bankCd}}" alt="">
								<p>
									<strong>{{bankName bankCd}}</strong>
									<sub>{{lnPrdtNm}}</sub>
									<label class="best">인기상품</label>
								</p>
								
							</dt>
							<dd>
								<ol>
									<li>
										<label>최저금리</label>
										<em>연</em><strong>{{toFixed lstLnRate}}</strong><b>%</b>
									</li>
									<li>
										<label>예상한도</label>
										<strong>{{toCurrency lstLnLmtAmt}}</strong><em>억원</em>
									</li>
								</ol>
								<span><label>{{bankType bankCd}}금융</label> <!--label>오프라인 가능</label> <label>바로대출</label--></span>
							</dd>
						</div>
						<!--info box e-->
					</dl>

				</div>

				<div class="dt-container">
					<details open>
						<summary>
							상품소개
							<img src="/user/static/assets/images/common/icon_list_arrow.svg" alt="" class="icon">
						</summary>
						<div class="details-info">
							<ul>
								<li>
									<label>신청대상</label>
									<ol>
										<li>만 20세이상 소득이 있는 분으로, 신용평가시스템에 승인을 받은 고객상환기간(원리금균등상환)</li>
									</ol>
								</li>
								<li>
									<label>대출기간</label>
									<ol>
										<li>최장 5년 이내</li>
									</ol>
								</li>
								<li>
									<label>대출한도</label>
									<ol>
										<li>무보증 최고 5,000만원 범위내</li>
									</ol>
								</li>
								<li>
									<label>대출금리</label>
									<ol>
										<li>변동금리 적용<em>대출금리는 고객 신용등급, 금융기여도 등에 따라 차등 적용</em></li>
									</ol>
								</li>
								<li>
									<label>거래형태</label>
									<ol>
										<li>개별거래, 한도거래 가능</li>
									</ol>
								</li>
								<li>
									<label>상환방식</label>
									<ol>
										<li>만기일시상환</li>
										<li>한도거래방식</li>
										<li>원리금균등상환</li>
									</ol>
								</li>
								<li>
									<label>준비서류</label>
									<ol>
										<li>신분증(주민등록증), 재직증명서(급여소득자),<br>
											자업자등록증명원(사업자)등 고객님의 신용평가에 필요한 서류</li>
									</ol>
								</li>
							</ul>
						</div>
					</details>
					
					<details open>
						<summary>
							거래실적 우대금리
							<img src="/user/static/assets/images/common/icon_list_arrow.svg" alt="" class="icon">
						</summary>
						<div class="details-info">
							<div class="rate">
								<p>우대금리</p>
								<p>
									<span>
										<label>선택합계</label>
										<strong>1.3%</strong>
									</span>
									<span>/</span>
									<span>
										<label>그룹한도</label>
										<strong>1.4%</strong>
									</span>
								</p>
							</div>

							<div class="rate_sel">
								<ul class="radioBox clearfix">
									<li class="radio">
										<input type="radio" name="radio_special_rate" id="r01" class="radioInput" title="신용카드" checked="checked" value="r01">
										<label for="r01">신용카드</label>
										<span>0.2%</span>
									</li>
									<li class="radio">
										<input type="radio" name="radio_special_rate" id="r02" class="radioInput" title="급여이체" value="r02">
										<label for="r02">급여이체</label>
										<span>0.2%</span>
									</li>
									<li class="radio">
										<input type="radio" name="radio_special_rate" id="r03" class="radioInput" title="예금평잔" value="r03">
										<label for="r03">예금평잔</label>
										<span>0.2%</span>
									</li>
									<li class="radio">
										<input type="radio" name="radio_special_rate" id="r04" class="radioInput" title="자동이체" value="r04">
										<label for="r04">자동이체</label>
										<span>0.2%</span>
									</li>
								</ul>
							</div>
						</div>
					</details>
				</div>
				</script>
			</div>
			<!-- content e -->

		</div>
		<!-- //container e -->

		<!-- bottom button -->
		<div class="bottom_btn wid50">
			<button class="dis">금융사콜백요청 </button>
			<button class="common" onclick="next()">계속하기</button>
		</div>
		<!-- bottom button e-->

	</div>
	<!-- //wrap e-->

	<script type="text/javascript" src="/user/static/assets/js/jquery-3.1.0.min.js"></script>
	<script type="text/javascript" src="/user/static/assets/js/jquery.easing.1.3.min.js"></script>
	<script type="text/javascript" src="/user/static/assets/js/jquery-ui.js"></script>
	<script src="/user/static/assets/js/mobile.js"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="/user/static/assets/js/handlebars.js"></script>
    <script src="/user/static/assets/js/handle_wrapper.js"></script>
	<script src="/user/static/assets/js/handle_helper.js"></script>
    <script src="/user/static/assets/js/handle_loan_helper.js"></script>

	<!--금리순/한도순-->
	<script th:inline="javascript">
	/*<![CDATA[*/
		const lnReqNo = /*[[${lnReqNo}]]*/;
		const fintecOrgMngno = /*[[${fintecOrgMngno}]]*/;
	/*]]>*/
	</script>

	<script>
		const wrapData = {
			loan: {
				bankCd: "",
				lstLnRate: 0,
				lstLnLmtAmt: 0
			}
		};

		function previous() {
			Bankpin.pageLink('/user/inqrslt/list');
		}

		function next() {
			const special_rate = jQuery("input[name='radio_special_rate']:checked").val();
			Bankpin.pageLink(`/user/inqrslt/confirm-detail?lnReqNo=${lnReqNo}&fintecOrgMngno=${fintecOrgMngno}&specialRate=${special_rate}`);
		}

		const loan_wrap = new HandleWrapper();
		function search_loan() {
			axios.get('/user/api/v1/inqrslt/detail',
				{params: {lnReqNo: lnReqNo, fintecOrgMngno: fintecOrgMngno}})
				.then(function(request) {
					if (request.status == 200) {
						if (!request.data.error) {
							wrapData.loan = request.data.data;
							loan_wrap.put(wrapData.loan);
						} else {
							console.log('error', request.data.message);
						}
					} else {
						console.log('error', request.data);
					}
				})
				.catch(function(error) {
					if (error.response) {
						console.error(error);
					}
				});
		}


		$(document).ready(function() {
			$('ul li a').click(function() {
				$('li a').removeClass("active");
				$(this).addClass("active");
			});

			loan_wrap.setTemplate($('#loan_template').html());
			loan_wrap.setData(wrapData.loan);
			loan_wrap.compile($('#loan'));

			search_loan();
		});
	</script>

</body>

</html>